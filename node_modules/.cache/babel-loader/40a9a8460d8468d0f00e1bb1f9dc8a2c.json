{"ast":null,"code":"var _jsxFileName = \"C:\\\\classfolder\\\\ReactJsReposytoryProjects\\\\src\\\\pages\\\\Import\\\\index.tsx\";\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport filesize from 'filesize';\nimport Header from '../../components/Header';\nimport FileList from '../../components/FileList';\nimport Upload from '../../components/Upload';\nimport { Container, Title, ImportFileContainer, Footer } from './styles';\nimport alert from \"../../assets/alert.svg\";\nimport api from '../../services/api';\n\nconst Import = () => {\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const history = useHistory();\n\n  async function handleUpload() {\n    const data = new FormData();\n    if (!uploadedFiles.length) return;\n    const file = uploadedFiles[0];\n    data.append('file', file.file, file.name);\n\n    try {\n      await api.post('/transactions/import', data);\n      history.push('/');\n    } catch (err) {\n      console.log(err.response.error);\n    }\n  }\n\n  function submitFile(files) {\n    const uploadFiles = files.map(file => ({\n      file,\n      name: file.name,\n      readableSize: filesize(file.size)\n    }));\n    setUploadedFiles(uploadFiles);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, \"Importar uma transa\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(ImportFileContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Upload, {\n    onUpload: submitFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }), !!uploadedFiles.length && /*#__PURE__*/React.createElement(FileList, {\n    files: uploadedFiles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 38\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: alert,\n    alt: \"Alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 15\n    }\n  }), \"Permitido apenas arquivos CSV\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUpload,\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, \"Enviar\")))));\n};\n\nexport default Import;","map":{"version":3,"sources":["C:/classfolder/ReactJsReposytoryProjects/src/pages/Import/index.tsx"],"names":["React","useState","useHistory","filesize","Header","FileList","Upload","Container","Title","ImportFileContainer","Footer","api","Import","uploadedFiles","setUploadedFiles","history","handleUpload","data","FormData","length","file","append","name","post","push","err","console","log","response","error","submitFile","files","uploadFiles","map","readableSize","size","alert"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAOC,QAAP,MAAqB,UAArB;AAEA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AAEA,SAASC,SAAT,EAAoBC,KAApB,EAA2BC,mBAA3B,EAAgDC,MAAhD,QAA8D,UAA9D;;AAGA,OAAOC,GAAP,MAAgB,oBAAhB;;AAQA,MAAMC,MAAgB,GAAG,MAAM;AAC7B,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCb,QAAQ,CAAc,EAAd,CAAlD;AACA,QAAMc,OAAO,GAAGb,UAAU,EAA1B;;AAEA,iBAAec,YAAf,GAA6C;AAC3C,UAAMC,IAAI,GAAG,IAAIC,QAAJ,EAAb;AAEA,QAAI,CAACL,aAAa,CAACM,MAAnB,EAA2B;AAE3B,UAAMC,IAAI,GAAGP,aAAa,CAAC,CAAD,CAA1B;AAEAI,IAAAA,IAAI,CAACI,MAAL,CAAY,MAAZ,EAAoBD,IAAI,CAACA,IAAzB,EAA+BA,IAAI,CAACE,IAApC;;AAEA,QAAI;AACF,YAAMX,GAAG,CAACY,IAAJ,CAAS,sBAAT,EAAiCN,IAAjC,CAAN;AAEAF,MAAAA,OAAO,CAACS,IAAR,CAAa,GAAb;AACD,KAJD,CAIE,OAAOC,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAJ,CAAaC,KAAzB;AACD;AACF;;AAED,WAASC,UAAT,CAAoBC,KAApB,EAAyC;AACvC,UAAMC,WAAW,GAAGD,KAAK,CAACE,GAAN,CAAUb,IAAI,KAAK;AACrCA,MAAAA,IADqC;AAErCE,MAAAA,IAAI,EAAEF,IAAI,CAACE,IAF0B;AAGrCY,MAAAA,YAAY,EAAE/B,QAAQ,CAACiB,IAAI,CAACe,IAAN;AAHe,KAAL,CAAd,CAApB;AAMArB,IAAAA,gBAAgB,CAACkB,WAAD,CAAhB;AACD;;AAED,sBACE,uDACE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADF,eAEE,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEF,UAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEG,CAAC,CAACjB,aAAa,CAACM,MAAhB,iBAA0B,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAEN,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAF7B,eAIE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAEuB,KAAV;AAAiB,IAAA,GAAG,EAAC,OAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,kCADF,eAKE;AAAQ,IAAA,OAAO,EAAEpB,YAAjB;AAA+B,IAAA,IAAI,EAAC,QAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALF,CAJF,CAFF,CAFF,CADF;AAsBD,CAtDD;;AAwDA,eAAeJ,MAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport filesize from 'filesize';\r\n\r\nimport Header from '../../components/Header';\r\nimport FileList from '../../components/FileList';\r\nimport Upload from '../../components/Upload';\r\n\r\nimport { Container, Title, ImportFileContainer, Footer } from './styles';\r\n\r\nimport alert from '../../assets/alert.svg';\r\nimport api from '../../services/api';\r\n\r\ninterface FileProps {\r\n  file: File;\r\n  name: string;\r\n  readableSize: string;\r\n}\r\n\r\nconst Import: React.FC = () => {\r\n  const [uploadedFiles, setUploadedFiles] = useState<FileProps[]>([]);\r\n  const history = useHistory();\r\n\r\n  async function handleUpload(): Promise<void> {\r\n    const data = new FormData();\r\n\r\n    if (!uploadedFiles.length) return;\r\n\r\n    const file = uploadedFiles[0];\r\n\r\n    data.append('file', file.file, file.name);\r\n\r\n    try {\r\n      await api.post('/transactions/import', data);\r\n\r\n      history.push('/');\r\n    } catch (err) {\r\n      console.log(err.response.error);\r\n    }\r\n  }\r\n\r\n  function submitFile(files: File[]): void {\r\n    const uploadFiles = files.map(file => ({\r\n      file,\r\n      name: file.name,\r\n      readableSize: filesize(file.size),\r\n    }));\r\n\r\n    setUploadedFiles(uploadFiles);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Header size=\"small\" />\r\n      <Container>\r\n        <Title>Importar uma transação</Title>\r\n        <ImportFileContainer>\r\n          <Upload onUpload={submitFile} />\r\n          {!!uploadedFiles.length && <FileList files={uploadedFiles} />}\r\n\r\n          <Footer>\r\n            <p>\r\n              <img src={alert} alt=\"Alert\" />\r\n              Permitido apenas arquivos CSV\r\n            </p>\r\n            <button onClick={handleUpload} type=\"button\">\r\n              Enviar\r\n            </button>\r\n          </Footer>\r\n        </ImportFileContainer>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Import;\r\n"]},"metadata":{},"sourceType":"module"}